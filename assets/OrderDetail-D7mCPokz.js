import{e as p,r as C,j as t,V as h,F as b,K as j}from"./index-YnGoI835.js";import{u as E}from"./orderStore-C1dq0u73.js";import{U as N,O as v,E as w}from"./EstimatedTime-BpnizJjx.js";import{H as I}from"./Header-DCEiKb3c.js";import{u as y}from"./useSystemContext-C-V-ZGSz.js";import{u as D}from"./useCategoryQueries-CgWAV6St.js";import{C as P}from"./CartItemCard-BvIBI9nm.js";import"./useQueries-BSENLGt3.js";import"./blur-B1PbKLpl.js";const F=()=>{const e=E(s=>s.orderData),{userInfo:i,merchantData:o,menuCategoryList:c}=y(),r=p();if(C.useEffect(()=>{e===null&&r("/store/pos/management/order")},[e,r]),e===null)return t.jsx(h,{});const m={PENDING:{text:"未接單",bgColor:"bg-red-500"},PROCESSING:{text:"製作中",bgColor:"bg-blue-500"},COMPLETED:{text:"未取餐",bgColor:"bg-yellow-500"},PICKED_UP:{text:"已取餐",bgColor:"bg-green-500"},CANCELED:{text:"取消",bgColor:"bg-gray-300"}},l=s=>m[s]||{text:"default",bgColor:"bg-gray-200"},u=t.jsx("button",{className:`${l(e==null?void 0:e.status).bgColor} text-sm px-3 py-1 rounded-md text-white font-bold`,children:l(e==null?void 0:e.status).text}),{categoryData:x}=D(c,o==null?void 0:o.menuId,i!==void 0),f=()=>{r(-1)},g=s=>{const d=x.flatMap(a=>a.dishes).find(a=>a.id===s);return d?d.picture:null};return t.jsxs("div",{className:"flex flex-col h-screen",children:[t.jsx("div",{className:"sticky mt-[54px] z-50 shadow-sm",children:t.jsx(I,{LeftIcon:t.jsx(b,{icon:j}),title:"單號 "+e.id.slice(-5),onLeftClick:f,rightComponents:[u]})}),t.jsxs("div",{className:"flex-1 overflow-auto pb-[48px]",children:[t.jsxs("div",{className:"bg-white text-black flex-1 p-4 overflow-auto",children:[t.jsx(N,{user:e,role:i.role}),t.jsx(v,{note:e.note}),e.orderedDishes.map((s,n)=>t.jsx(P,{dishData:s,imageUrl:g(s.dishId),showAdjustBtn:!1},n))]}),t.jsx("div",{className:"fixed bottom-0 left-0 right-0 w-full",children:t.jsx(w,{value:e.estimatedPrepTime})})]})]})};export{F as default};
