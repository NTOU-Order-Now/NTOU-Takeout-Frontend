import{P as t,j as e,c as h}from"./index-NGzkvcc4.js";import{u as f}from"./orderStore-cE2a9vjc.js";import{F as j,w as N}from"./index-Basaqh1b.js";import{U as C}from"./UserInfo-DFqPFUtS.js";const x=({orderId:s,status:r,onBackClick:o})=>{const a={PENDING:{text:"製作中",bgColor:"bg-blue-500"},PROCESSING:{text:"未取餐",bgColor:"bg-yellow-500"},COMPLETED:{text:"已取餐",bgColor:"bg-green-500"},CANCELED:{text:"取消",bgColor:"bg-gray-300"}}[r]||{text:"default",bgColor:"bg-gray-200"};return e.jsxs("header",{className:"bg-orange-500 px-6 py-4 flex items-center justify-between",children:[e.jsx("button",{onClick:o,className:"text-white text-2xl mr-4",children:e.jsx(j,{icon:N})}),e.jsxs("h1",{className:"text-xl font-bold",children:["單號 ",s]}),e.jsx("button",{className:`${a.bgColor} text-sm px-3 py-1 rounded-md text-white font-bold`,children:a.text})]})};x.propTypes={orderId:t.string.isRequired,status:t.oneOf(["PENDING","PROCESSING","COMPLETED","CANCELED"]).isRequired,onBackClick:t.func.isRequired};const u=({note:s})=>e.jsxs("div",{className:"bg-gray-100 p-3 rounded-md mb-6",children:[e.jsx("h2",{className:"font-bold mb-2",children:"訂單備註"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s})]});u.propTypes={note:t.string.isRequired};const p=({item:s})=>{const{name:r,imageUrl:o,price:n,quantity:a,chosenAttributes:i,note:d}=s;let c=0;const m=i!=null&&i.length?i.map(l=>(c+=l.extraCost||0,`${l.name}: ${l.chosenOption}`)).join(", "):"";return e.jsxs("div",{className:"flex items-center border-b py-4 relative min-h-24",children:[e.jsx("img",{src:o,alt:r,className:"w-20 h-20 object-cover rounded-md"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"font-bold text-lg",children:r}),m&&e.jsxs("p",{className:"text-sm text-gray-500",children:[m," +$",c]}),d&&e.jsx("p",{className:"text-sm text-gray-500",children:d}),e.jsxs("p",{className:"text-slate-900 text-md",children:["$",n.toFixed(2)]})]}),e.jsxs("p",{className:"font-bold text-gray-700 absolute bottom-4 right-4",children:["共",a,"份"]})]})};p.propTypes={item:t.shape({id:t.number.isRequired,name:t.string.isRequired,imageUrl:t.string.isRequired,price:t.number.isRequired,quantity:t.number.isRequired,chosenAttributes:t.arrayOf(t.shape({name:t.string.isRequired,chosenOption:t.string.isRequired,extraCost:t.number})),note:t.string}).isRequired};const g=({value:s,onChange:r})=>{const o=n=>{const a=n.target.value;!isNaN(a)&&a>=0&&r(parseInt(a,10))};return e.jsxs("footer",{className:"rounded-t-md bg-orange-500 p-4 text-center text-white flex justify-center items-center",children:[e.jsx("span",{className:"text-xl font-bold mr-2",children:"預估完成時間"}),e.jsx("input",{type:"number",value:s,onChange:o,className:"text-center text-black w-16 px-2 py-1 rounded-md text-2xl font-bold",min:"0"}),e.jsx("span",{className:"text-xl ml-2",children:"分鐘"})]})};g.propTypes={value:t.number.isRequired,onChange:t.func.isRequired};const b=({estimatedTime:s,onTimeChange:r})=>e.jsx("div",{className:"fixed bottom-0 min-w-full",children:e.jsx(g,{value:s,onChange:r})});b.propTypes={estimatedTime:t.number.isRequired,onTimeChange:t.func.isRequired};const y=()=>{const s=f(n=>n.orderData),r=h();console.debug("orderData",s);const o=()=>{r(-1)};return e.jsxs("div",{className:"font-sans bg-gray-900 text-white min-h-screen flex flex-col",children:[e.jsx(x,{orderId:s.id,status:s.status,onBackClick:o}),e.jsxs("div",{className:"bg-white text-black flex-1 p-4 overflow-auto",children:[e.jsx(C,{user:s}),e.jsx(u,{note:s.note}),s.items.map(n=>e.jsx(p,{item:n},n.id))]}),e.jsx(b,{estimatedTime:s.estimatedTime})]})};y.propTypes={};export{y as default};
