import{c as p,D as N,E as g,j as e}from"./index-DO00HQGw.js";import E from"./OrderCard-DHWtbSIs.js";import{P as C,C as h}from"./AcceptedList-CK1NXBtC.js";import"./orderStore-Bb1wDkRk.js";import"./useMutation-B8e66jdv.js";const A=()=>{const{userInfo:c}=p(),l=c==null?void 0:c.role,{orders:i,isLoading:x,isError:u,error:d,progress:n,completedQueries:f}=N(l==="MERCHANT"?"PENDING":"ALL"),s=i==null?void 0:i.pages.map(t=>t.content.filter(r=>l==="MERCHANT"?r.status==="PENDING":r.status!=="PICKED_UP"&&r.status!=="CANCELED")),a=s==null?void 0:s.flatMap(t=>t);console.debug("flatOrders",a);const{unacceptedListNumber:j}=g();return x||n<180?e.jsx("div",{className:"w-full flex justify-center mt-20",children:e.jsxs("div",{className:"w-3/5 flex flex-col justify-center items-center",children:[e.jsx(C,{value:n,className:"w-full"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Loading ",f," of ",j," ..."]})]})}):(a==null?void 0:a.length)===0?e.jsx("div",{className:"w-full flex justify-center mt-20",children:e.jsx("div",{className:"w-3/5 flex flex-col justify-center items-center",children:e.jsx("div",{className:"text-lg text-gray-500",children:"目前無未接訂單"})})}):u?e.jsxs("div",{className:"text-center pt-20",children:["Error: ",d.message]}):e.jsx("div",{className:"flex flex-col text-center justify-between ",children:s==null?void 0:s.map((t,r)=>t.map((o,m)=>l==="MERCHANT"?e.jsx(E,{order:o,pageId:r},m):e.jsx(h,{order:o},m)))})};export{A as default};
