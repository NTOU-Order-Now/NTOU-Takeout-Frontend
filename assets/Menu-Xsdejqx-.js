const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/NavbarSkeleton-CQcu5wyZ.js","assets/index-CFrlWo3n.js","assets/index-CO-7yoI2.css","assets/MenuHeaderSkeleton-D_wZzoWl.js","assets/ViewCartButtonSkeleton-C3AUQ9JL.js","assets/MenuSectionSkeleton-ZqPEuH_5.js","assets/MenuHeader-CfbRqgRv.js","assets/blur-B0sOPoAv.js","assets/blur-DOfe2hmq.css","assets/MenuNavbar-DLDoBDPp.js","assets/merchantMenuNav-CbP8-yYk.js","assets/MenuSection-Bi0yAsdp.js","assets/ViewCartButton-CK0sT_BX.js","assets/useSystemContext-Cf21cK5y.js"])))=>i.map(i=>d[i]);
import{r as e,_ as a,E as j,G as M,j as s,M as b,B as g}from"./index-CFrlWo3n.js";import{u as D}from"./useCategoryQueries-C-dpPC4Q.js";import{u as P}from"./merchantStore-BKowIeL-.js";import{u as L}from"./merchantMenuNav-CbP8-yYk.js";const N=e.lazy(()=>a(()=>import("./NavbarSkeleton-CQcu5wyZ.js"),__vite__mapDeps([0,1,2]))),R=e.lazy(()=>a(()=>import("./MenuHeaderSkeleton-D_wZzoWl.js"),__vite__mapDeps([3,1,2]))),V=e.lazy(()=>a(()=>import("./ViewCartButtonSkeleton-C3AUQ9JL.js"),__vite__mapDeps([4,1,2]))),k=e.lazy(()=>a(()=>import("./MenuSectionSkeleton-ZqPEuH_5.js"),__vite__mapDeps([5,1,2]))),w=e.lazy(()=>a(()=>import("./MenuHeader-CfbRqgRv.js"),__vite__mapDeps([6,1,2,7,8]))),T=e.lazy(()=>a(()=>import("./MenuNavbar-DLDoBDPp.js"),__vite__mapDeps([9,1,2,10]))),z=e.lazy(()=>a(()=>import("./MenuSection-Bi0yAsdp.js"),__vite__mapDeps([11,1,2]))),A=e.lazy(()=>a(()=>import("./ViewCartButton-CK0sT_BX.js"),__vite__mapDeps([12,1,2,13])));function H(){const{merchantId:c}=j(),l=e.useRef([]),[v,x]=e.useState(!1),i=L(t=>t.setNavbarItems),S=t=>{var r;(r=l.current[t])==null||r.scrollIntoView({behavior:"smooth",inline:"start"})};e.useEffect(()=>{const t=()=>{const r=window.scrollY;x(r>260)};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[]);const u=P(t=>t.getMerchantById),[d,_]=e.useState(null),[m,f]=e.useState(null);e.useEffect(()=>{const t=u(c);t?(f(t),_(t==null?void 0:t.menuId),console.debug("merchantData?.menuId",t==null?void 0:t.menuId)):(async()=>{try{return await g.getMerchantsByIdList([c])}catch(o){console.error("Failed to fetch merchant data:",o)}})().then(o=>{var E,I;console.debug("merchant not fetched, res:",o.data[0]),f(o.data[0]),_((E=o.data[0])==null?void 0:E.menuId),console.debug("res.data[0]?.menuId",(I=o.data[0])==null?void 0:I.menuId)})},[c,u]);const n=M(d),{categoryData:p}=D(n,d),[h,y]=e.useState(null);return e.useEffect(()=>{n!=null&&n.length&&i(n.map(t=>t.categoryName))},[n,i]),c&&!m?s.jsx(b,{}):s.jsxs("div",{className:"flex flex-col ",children:[s.jsx(e.Suspense,{fallback:s.jsx(R,{}),children:s.jsx(w,{merchantData:m})}),s.jsx(e.Suspense,{fallback:s.jsx(N,{isNavbarFixed:!1}),children:s.jsx(T,{onNavClick:S,isNavbarFixed:v})}),s.jsx(e.Suspense,{fallback:s.jsx(k,{}),children:s.jsx(z,{selectedDish:h,setSelectedDish:y,sectionRefs:l,categoryData:p})}),h==null&&s.jsx(e.Suspense,{fallback:s.jsx(V,{}),children:s.jsx(A,{})})]})}export{H as default};
