import{c as p,r as C,j as t,H as h}from"./index-C6Vrb7cb.js";import{u as b}from"./orderStore-DdcuXir2.js";import{U as j,O as E,E as N}from"./EstimatedTime-B98rclpm.js";import{H as v}from"./Header-C2cPzCVk.js";import{F as w,m as I}from"./index-D5PwHk5Q.js";import{u as y}from"./useSystemContext-Buuh7hNb.js";import{u as D}from"./useCategoryQueries-l0ZVmd0i.js";import{C as P}from"./CartItemCard-C75hKD0V.js";import"./useQueries-DhayYAxL.js";import"./useMutation-Boh6fdnl.js";import"./blur-AUN4FaEB.js";const M=()=>{const e=b(s=>s.orderData),{userInfo:i,merchantData:o,menuCategoryList:d}=y(),r=p();if(C.useEffect(()=>{e===null&&r("/store/pos/management/order")},[e,r]),e===null)return t.jsx(h,{});const c={PENDING:{text:"未接單",bgColor:"bg-red-500"},PROCESSING:{text:"製作中",bgColor:"bg-blue-500"},COMPLETED:{text:"未取餐",bgColor:"bg-yellow-500"},PICKED_UP:{text:"已取餐",bgColor:"bg-green-500"},CANCELED:{text:"取消",bgColor:"bg-gray-300"}},l=s=>c[s]||{text:"default",bgColor:"bg-gray-200"},u=t.jsx("button",{className:`${l(e==null?void 0:e.status).bgColor} text-sm px-3 py-1 rounded-md text-white font-bold`,children:l(e==null?void 0:e.status).text}),{categoryData:x}=D(d,o==null?void 0:o.menuId,i!==void 0),f=()=>{r(-1)},g=s=>{const m=x.flatMap(a=>a.dishes).find(a=>a.id===s);return m?m.picture:null};return t.jsxs("div",{className:"flex flex-col h-screen",children:[t.jsx("div",{className:"sticky mt-[54px] z-50 shadow-sm",children:t.jsx(v,{LeftIcon:t.jsx(w,{icon:I}),title:"單號 "+e.id.slice(-5),onLeftClick:f,rightComponents:[u]})}),t.jsxs("div",{className:"flex-1 overflow-auto pb-[48px]",children:[t.jsxs("div",{className:"bg-white text-black flex-1 p-4 overflow-auto",children:[t.jsx(j,{user:e,role:i.role}),t.jsx(E,{note:e.note}),e.orderedDishes.map((s,n)=>t.jsx(P,{dishData:s,imageUrl:g(s.dishId),showAdjustBtn:!1},n))]}),t.jsx("div",{className:"fixed bottom-0 left-0 right-0 w-full",children:t.jsx(N,{value:e.estimatedPrepTime})})]})]})};export{M as default};
