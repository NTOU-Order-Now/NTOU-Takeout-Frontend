import{P as a,j as e,c as C,N as j}from"./index-CGLjlMRI.js";import{u as N}from"./orderStore-BBN-qGJa.js";import{U as y,C as v}from"./UserInfo-C2y61RST.js";import{H as w}from"./Header-C8suAfaH.js";import{F as I,v as D}from"./index-DdxdYMTC.js";import{u as E}from"./useSystemContext-B9O4VHUW.js";import{u as P}from"./useCategoryQueries-DuBIVxZG.js";import"./useMutation-DlAJJIzI.js";import"./blur-Cy3ahvP8.js";const d=({note:t})=>e.jsxs("div",{className:"bg-gray-100 p-3 rounded-md mb-6 min-h-24",children:[e.jsx("h2",{className:"font-bold mb-2",children:"訂單備註"}),e.jsx("p",{className:"text-gray-600 text-sm",children:t})]});d.propTypes={note:a.string.isRequired};const m=({value:t,onChange:n})=>e.jsxs("footer",{className:"  bg-orange-500 p-4 text-center text-white flex justify-center items-center",children:[e.jsx("span",{className:"text-xl font-bold mr-2",children:"預估完成時間"}),e.jsx("span",{className:"bg-orange-300 rounded-xl w-14 h-8 content-center text-black font-extrabold",children:t}),e.jsx("span",{className:"text-xl ml-2",children:"分鐘"})]});m.propTypes={value:a.number.isRequired,onChange:a.func};const T=()=>{const t=N(s=>s.orderData);console.debug("orderData:",t);const n={PENDING:{text:"未接單",bgColor:"bg-red-500"},PROCESSING:{text:"製作中",bgColor:"bg-blue-500"},COMPLETED:{text:"未取餐",bgColor:"bg-yellow-500"},PICKED_UP:{text:"已取餐",bgColor:"bg-green-500"},CANCELED:{text:"取消",bgColor:"bg-gray-300"}},l=s=>n[s]||{text:"default",bgColor:"bg-gray-200"},x=e.jsx("button",{className:`${l(t==null?void 0:t.status).bgColor} text-sm px-3 py-1 rounded-md text-white font-bold`,children:l(t==null?void 0:t.status).text}),{userInfo:u,merchantData:r,menuCategoryList:p}=E(),{categoryData:g}=P(p,r==null?void 0:r.menuId,u!==void 0),f=C(),h=()=>{f(-1)},b=s=>{const c=g.flatMap(o=>o.dishes).find(o=>o.id===s);return c?c.picture:null};return t===null?e.jsx(j,{to:"/store/pos/management/order",replace:!0}):e.jsxs("div",{className:"flex flex-col h-screen",children:[e.jsx("div",{className:"sticky mt-[54px] z-50 shadow-sm",children:e.jsx(w,{LeftIcon:e.jsx(I,{icon:D}),title:"單號 "+t.id.slice(-5),onLeftClick:h,rightComponents:[x]})}),e.jsxs("div",{className:"flex-1 overflow-auto pb-[48px]",children:[e.jsxs("div",{className:"bg-white text-black flex-1 p-4 overflow-auto",children:[e.jsx(y,{user:t}),e.jsx(d,{note:t.note}),t.orderedDishes.map((s,i)=>e.jsx(v,{dishData:s,imageUrl:b(s.dishId)},i))]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 w-full",children:e.jsx(m,{value:t.estimatedPrepTime})})]})]})};T.propTypes={};export{T as default};
