import{r as l,j as e,g as r,X as v,P as o}from"./index-C6Vrb7cb.js";import{B as O}from"./button-qAOIA98S.js";import{O as g,C as m,a as p,b as x,D as b,R as I,T as q,P as H}from"./index-D7KAb4n_.js";import"./orderStore-DdcuXir2.js";import{b as k}from"./AcceptedList-CFDNIcYY.js";import"./useMutation-Boh6fdnl.js";import"./useSystemContext-Buuh7hNb.js";import"./useQueries-DhayYAxL.js";const A=I,L=q,G=H,z=p,f=l.forwardRef(({className:t,...s},a)=>e.jsx(g,{ref:a,className:r("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));f.displayName=g.displayName;const C=l.forwardRef(({className:t,children:s,...a},n)=>e.jsxs(G,{children:[e.jsx(f,{}),e.jsxs(m,{ref:n,className:r("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[s,e.jsxs(p,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));C.displayName=m.displayName;const y=({className:t,...s})=>e.jsx("div",{className:r("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});y.displayName="DialogHeader";const N=({className:t,...s})=>e.jsx("div",{className:r("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});N.displayName="DialogFooter";const h=l.forwardRef(({className:t,...s},a)=>e.jsx(x,{ref:a,className:r("text-lg font-semibold leading-none tracking-tight",t),...s}));h.displayName=x.displayName;const E=l.forwardRef(({className:t,...s},a)=>e.jsx(b,{ref:a,className:r("text-sm text-muted-foreground",t),...s}));E.displayName=b.displayName;const M=({order:t,status:s,pageId:a})=>{const n=i=>{switch(i){case"ACCEPT":return{bgColor:"bg-green-500",bgHoverColor:"bg-green-600",statusText:"接單",title:"將訂單轉為製作中?",description:`訂單接收後不可取消，顧客也不可取消訂單。
確認後訂單將切換為製作中`,disable:!1};case"REJECT":return{bgColor:"bg-red-500",bgHoverColor:"bg-red-600",statusText:"拒絕",title:"拒絕此訂單?",description:"訂單拒絕後會立即通知顧客",disable:!1};case"PROCESSING":return{bgColor:"bg-blue-500",bgHoverColor:"bg-blue-600",statusText:"製作中",title:"將訂單轉為未取餐?",description:"確認訂單已製作完畢，確認後將通知顧客可前往取餐，訂單狀態切換為未取餐",disable:!1};case"COMPLETED":return{bgColor:"bg-yellow-500",bgHoverColor:"bg-yellow-600",statusText:"未取餐",title:"將訂單轉為已取餐?",description:"確認顧可已經取餐，確認後將訂單狀態切換為已取餐",disable:!1};case"PICKED_UP":return{bgColor:"bg-lime-600",bgHoverColor:"bg-lime-600",statusText:"已取餐",title:"此訂單已取餐",disable:!0};case"CANCELED":return{bgColor:"bg-gray-500",textColor:"text-gray-500",statusText:"取消",title:"此訂單已取消",disable:!0};default:return{bgColor:"bg-gray-200",statusText:""}}},D=i=>{switch(i){case"ACCEPT":return"PROCESSING";case"REJECT":return"CANCELED";case"PROCESSING":return"COMPLETED";case"COMPLETED":return"PICKED_UP";case"PICKED_UP":return"CANCELED";case"PENDING":return"PROCESSING";default:return null}},{bgColor:j,bgHoverColor:T,statusText:P,title:R,description:w,disable:c}=n(s),d=D(s),{updateOrderStatusAsync:u}=k(a),S=l.useCallback(async()=>{if(d)try{await u({orderId:t.id,newStatus:d})}catch(i){console.error("Failed to update order status:",i)}},[t.id,u,d]);return e.jsxs(A,{children:[e.jsx(L,{asChild:!0,children:e.jsx("button",{className:`${j} text-white px-3 py-1 text-sm font-bold rounded-md hover:${T} disabled:${c}`,children:P})}),e.jsxs(C,{className:"w-3/4",children:[e.jsxs(y,{children:[e.jsx(h,{children:R}),e.jsx(E,{children:w})]}),e.jsx(N,{children:e.jsx(z,{asChild:!0,children:e.jsx(O,{type:"button",onClick:async()=>{c||await S()},children:"確定"})})})]})]})};M.propTypes={order:o.shape({id:o.string.isRequired,status:o.string.isRequired,cost:o.number.isRequired,orderTime:o.string.isRequired,estimatedPrepTime:o.number.isRequired}).isRequired,status:o.string.isRequired,pageId:o.number.isRequired};export{M as default};
