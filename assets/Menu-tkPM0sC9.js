const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/NavbarSkeleton-DEnsFkPf.js","assets/index-NGzkvcc4.js","assets/index-Djd05nlW.css","assets/MenuHeaderSkeleton-DIo_Nrpr.js","assets/ViewCartButtonSkeleton-B9kRXlnM.js","assets/MenuSectionSkeleton-C9vxvhF_.js","assets/MenuHeader-Be5FoNvX.js","assets/index-Basaqh1b.js","assets/blur-Dwm1PFOt.js","assets/blur-DOfe2hmq.css","assets/MenuNavbar-CDZKGbnO.js","assets/merchantMenuNav-BahwwGw1.js","assets/MenuSection-omqBowjd.js","assets/ViewCartButton-BKWmmYQI.js","assets/useSystemContext-Bg3dPr5V.js"])))=>i.map(i=>d[i]);
import{r as e,_ as a,h as j,i as M,j as s,M as b,g}from"./index-NGzkvcc4.js";import{u as D}from"./useCategoryQueries-D0DcMVAD.js";import{u as P}from"./merchantStore-1LpMhfxF.js";import{u as L}from"./merchantMenuNav-BahwwGw1.js";const N=e.lazy(()=>a(()=>import("./NavbarSkeleton-DEnsFkPf.js"),__vite__mapDeps([0,1,2]))),R=e.lazy(()=>a(()=>import("./MenuHeaderSkeleton-DIo_Nrpr.js"),__vite__mapDeps([3,1,2]))),V=e.lazy(()=>a(()=>import("./ViewCartButtonSkeleton-B9kRXlnM.js"),__vite__mapDeps([4,1,2]))),k=e.lazy(()=>a(()=>import("./MenuSectionSkeleton-C9vxvhF_.js"),__vite__mapDeps([5,1,2]))),w=e.lazy(()=>a(()=>import("./MenuHeader-Be5FoNvX.js"),__vite__mapDeps([6,1,2,7,8,9]))),T=e.lazy(()=>a(()=>import("./MenuNavbar-CDZKGbnO.js"),__vite__mapDeps([10,1,2,11]))),z=e.lazy(()=>a(()=>import("./MenuSection-omqBowjd.js"),__vite__mapDeps([12,1,2]))),A=e.lazy(()=>a(()=>import("./ViewCartButton-BKWmmYQI.js"),__vite__mapDeps([13,1,2,7,14])));function H(){const{merchantId:c}=j(),l=e.useRef([]),[x,E]=e.useState(!1),i=L(t=>t.setNavbarItems),S=t=>{var r;(r=l.current[t])==null||r.scrollIntoView({behavior:"smooth",inline:"start"})};e.useEffect(()=>{const t=()=>{const r=window.scrollY;E(r>260)};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[]);const u=P(t=>t.getMerchantById),[d,_]=e.useState(null),[m,f]=e.useState(null);e.useEffect(()=>{const t=u(c);t?(f(t),_(t==null?void 0:t.menuId),console.debug("merchantData?.menuId",t==null?void 0:t.menuId)):(async()=>{try{return await g.getMerchantsByIdList([c])}catch(o){console.error("Failed to fetch merchant data:",o)}})().then(o=>{var I,v;console.debug("merchant not fetched, res:",o.data[0]),f(o.data[0]),_((I=o.data[0])==null?void 0:I.menuId),console.debug("res.data[0]?.menuId",(v=o.data[0])==null?void 0:v.menuId)})},[c,u]);const n=M(d),{categoryData:p}=D(n,d),[h,y]=e.useState(null);return e.useEffect(()=>{n!=null&&n.length&&i(n.map(t=>t.categoryName))},[n,i]),c&&!m?s.jsx(b,{}):s.jsxs("div",{className:"flex flex-col ",children:[s.jsx(e.Suspense,{fallback:s.jsx(R,{}),children:s.jsx(w,{merchantData:m})}),s.jsx(e.Suspense,{fallback:s.jsx(N,{isNavbarFixed:!1}),children:s.jsx(T,{onNavClick:S,isNavbarFixed:x})}),s.jsx(e.Suspense,{fallback:s.jsx(k,{}),children:s.jsx(z,{selectedDish:h,setSelectedDish:y,sectionRefs:l,categoryData:p})}),h==null&&s.jsx(e.Suspense,{fallback:s.jsx(V,{}),children:s.jsx(A,{})})]})}export{H as default};
